/**
 * Kairos.js - A non date-based time calculator
 * @author Rodrigo Gomes da Silva <rodrigo.smscom@gmail.com>
 * @version v2.1.0
 * @link https://github.com/kairos
 * @license BSD-2-Clause
 */
!function(){"use strict";var n={};n._pattern="#hh:mm:ss.SSS",n._validator=new RegExp(/^[+-]?\d\d:\d\d:\d\d\.\d\d\d/),n._autoParser=!1;var t,e="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this;null!==e&&(t=e.Kairos),n.noConflict=function(){return e.Kairos=t,n},n.setPattern=function(t){n._validator=n.Lexicon.getValidator(t),n._pattern=t},n.getPattern=function(){return n._pattern},n.setAutoParser=function(t){n._autoParser=!!t},n.getAutoParser=function(){return n._autoParser},n.validate=function(t,e){return n.Lexicon.validate(t,e)},n.new=function(t,e){return new n.Engine(t,e)},n.absolute=function(t,e){return n.new(t,e).toAbsolute()},n.plus=function(t,e,r){return n.new(t,r).plus(e,r)},n.minus=function(t,e,r){return n.new(t,r).minus(e,r)},n.multiply=function(t,e,r){return n.new(t,r).multiply(e)},n.divide=function(t,e,r){return n.new(t,r).divide(e)},n.getFraction=function(t,e,r,o){if(e>r)throw new Error("Improper fraction");return n.new(t,o).multiply(e).divide(r)},n.getInterval=function(t,e,r){return n.new(t,r).minus(e,r).toAbsolute()},n.toMilliseconds=function(t,e){return n.new(t,e).toMilliseconds()},n.toSeconds=function(t,e){return n.new(t,e).toSeconds()},n.toMinutes=function(t,e){return n.new(t,e).toMinutes()},n.toHours=function(t,e){return n.new(t,e).toHours()},n.compare=function(t,e,r){return n.new(t,r).compareTo(e,r)},n.min=function(t,e){t instanceof Array||(e=null,t=Array.prototype.slice.call(arguments));var r=t.reduce(function(t,r){return n.compare(t,r,e)<0?t:r});return n.new(r,e)},n.max=function(t,e){t instanceof Array||(e=null,t=Array.prototype.slice.call(arguments));var r=t.reduce(function(t,r){return n.compare(t,r,e)>0?t:r});return n.new(r,e)},"object"==typeof module&&module.exports?module.exports=n:"function"==typeof define&&define.amd?define([],function(){return n}):e.Kairos=n,Math.trunc=Math.trunc||function(n){return n<0?Math.ceil(n):Math.floor(n)}}();
!function(){"use strict";var e={SIGN:"#",HOURS:"h",MINUTES:"m",SECONDS:"s",MILLISECONDS:"S",ESCAPE:"\\"};Kairos.Lexicon={},Kairos.Lexicon.getValidator=function(a){if("string"!=typeof a&&(a=Kairos._pattern),a===Kairos._pattern)return Kairos._validator;for(var t="",i=0,r=a.length;r>i;i++){var s=a[i];switch(s){case e.SIGN:t+="^[+-]?";break;case e.HOURS:case e.MINUTES:case e.SECONDS:case e.MILLISECONDS:t+="\\d";break;default:t+=s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}}return new RegExp(t)},Kairos.Lexicon.validate=function(e,a){return Kairos.Lexicon.getValidator(a).test(e)},Kairos.Lexicon.parse=function(a,t){if(t||(t=Kairos._pattern),!Kairos.Lexicon.validate(a,t))throw new Error("Cannot parse expression. Time format doesn't match the current time pattern.");for(var i=!0,r="",s="",n="",c="",l=0,o=t.length;o>l;l++){switch(t[l]){case e.SIGN:-1!==["+","-"].indexOf(a[l])?i="+"===a[l]:(t=t.slice(0,l)+t.slice(l+1),o--,l--);break;case e.HOURS:r+=a[l];break;case e.MINUTES:s+=a[l];break;case e.SECONDS:n+=a[l];break;case e.MILLISECONDS:c+=a[l]}}var S=Kairos.new().addHours(r?+r:0).addMinutes(s?+s:0).addSeconds(n?+n:0).addMilliseconds(c?+c:0);return i||(S.milliseconds=-S.milliseconds),S},Kairos.Lexicon.format=function(a,t,i){t||(t=Kairos._pattern);for(var r=a.milliseconds>=0,s=String(Math.abs(a.getHours())),n=String(Math.abs(a.getMinutes())),c=String(Math.abs(a.getSeconds())),l=String(Math.abs(a.getMilliseconds())),o="",S=s.length>(t.match(/h/g)||[]).length,g=t.length-1;g>=0;g--){var h=t[g],f=t[g-1]===e.ESCAPE;switch(f&&(o=h+o,g--),h){case e.SIGN:f||(o=(r?"+":"-")+o);break;case e.HOURS:if(f&&s.length>0){s=s.slice(0,s.length-1);break}if(S){i&&(o=s+o,i=!1);break}o=(s.slice(-1)||"0")+o,s.length>0&&(s=s.slice(0,s.length-1));break;case e.MINUTES:if(f&&n.length>0){n=n.slice(0,n.length-1);break}o=(n.slice(-1)||"0")+o,n.length>0&&(n=n.slice(0,n.length-1));break;case e.SECONDS:if(f&&c.length>0){c=c.slice(0,c.length-1);break}o=(c.slice(-1)||"0")+o,c.length>0&&(c=c.slice(0,c.length-1));break;case e.MILLISECONDS:if(f&&l.length>0){l=l.slice(0,l.length-1);break}o=(l.slice(-1)||"0")+o,l.length>0&&(l=l.slice(0,l.length-1));break;default:f||(o=h+o)}}return o},Kairos.Lexicon.findPattern=function(a){for(var t="",i=e.HOURS,r=0,s=a.length;s>r;r++){var n=a[r];if(-1===["+","-"].indexOf(n))if(isNaN(n)){if(isNaN(n))switch(t+=n,i){case e.HOURS:i=e.MINUTES;break;case e.MINUTES:i=e.SECONDS;break;case e.SECONDS:i=e.MILLISECONDS;break;default:i=!1}}else t+=i||n;else t+=e.SIGN}return t}}();
!function(){"use strict";var i={SECOND:1e3,MINUTE:6e4,HOUR:36e5};Kairos.Engine=function(i,t){if(i){if(i instanceof Kairos.Engine)return i;if("number"==typeof i)return this.milliseconds=i,this;if("string"==typeof i&&i.length>0)return Kairos.getAutoParser()&&(t=Kairos.Lexicon.findPattern(i)),new Kairos.Lexicon.parse(i,t);throw new Error("Invalid arguments")}},Kairos.Engine.prototype._resolveStep=function(t,n){switch(t){case 1:this.removeMilliseconds(this.getMilliseconds());break;case i.SECOND:this.removeSeconds(this.getSeconds());break;case i.MINUTE:this.removeMinutes(this.getMinutes());break;case i.HOUR:this.removeHours(this.getHours())}return this.milliseconds+n*t},Kairos.Engine.prototype.milliseconds=0,Kairos.Engine.prototype.setHours=function(t){return this.milliseconds=this._resolveStep(i.HOUR,t),this},Kairos.Engine.prototype.getHours=function(){return Math.trunc(this.milliseconds/i.HOUR)},Kairos.Engine.prototype.setMinutes=function(t){return this.milliseconds=this._resolveStep(i.MINUTE,t),this},Kairos.Engine.prototype.getMinutes=function(){return Math.trunc(Math.trunc(this.milliseconds-Math.trunc(this.toHours())*i.HOUR)/i.MINUTE)},Kairos.Engine.prototype.setSeconds=function(t){return this.milliseconds=this._resolveStep(i.SECOND,t),this},Kairos.Engine.prototype.getSeconds=function(){return Math.trunc(Math.trunc(this.milliseconds-Math.trunc(this.toMinutes())*i.MINUTE)/i.SECOND)},Kairos.Engine.prototype.setMilliseconds=function(i){return this.milliseconds=this._resolveStep(1,i),this},Kairos.Engine.prototype.getMilliseconds=function(){return Math.trunc(this.milliseconds-Math.trunc(this.toSeconds())*i.SECOND)},Kairos.Engine.prototype.addHours=function(t){return this.milliseconds+=i.HOUR*t,this},Kairos.Engine.prototype.addMinutes=function(t){return this.milliseconds+=i.MINUTE*t,this},Kairos.Engine.prototype.addSeconds=function(t){return this.milliseconds+=i.SECOND*t,this},Kairos.Engine.prototype.addMilliseconds=function(i){return this.milliseconds+=i,this},Kairos.Engine.prototype.removeHours=function(t){return this.milliseconds-=i.HOUR*t,this},Kairos.Engine.prototype.removeMinutes=function(t){return this.milliseconds-=i.MINUTE*t,this},Kairos.Engine.prototype.removeSeconds=function(t){return this.milliseconds-=i.SECOND*t,this},Kairos.Engine.prototype.removeMilliseconds=function(i){return this.milliseconds-=i,this},Kairos.Engine.prototype.toHours=function(){return this.milliseconds/i.HOUR},Kairos.Engine.prototype.toMinutes=function(){return this.milliseconds/i.MINUTE},Kairos.Engine.prototype.toSeconds=function(){return this.milliseconds/i.SECOND},Kairos.Engine.prototype.toMilliseconds=function(){return this.milliseconds},Kairos.Engine.prototype.toAbsolute=function(){return this.milliseconds=Math.abs(this.milliseconds),this},Kairos.Engine.prototype.plus=function(i,t){return i=new Kairos.Engine(i,t),this.milliseconds+=i.toMilliseconds(),this},Kairos.Engine.prototype.minus=function(i,t){return i=new Kairos.Engine(i,t),this.milliseconds-=i.toMilliseconds(),this},Kairos.Engine.prototype.multiply=function(i){return this.milliseconds*=i,this},Kairos.Engine.prototype.divide=function(i){return this.milliseconds/=i,this},Kairos.Engine.prototype.compareTo=function(i,t){return i=new Kairos.Engine(i,t),this.milliseconds<i.toMilliseconds()?-1:this.milliseconds===i.toMilliseconds()?0:this.milliseconds>i.toMilliseconds()?1:void 0},Kairos.Engine.prototype.toString=function(i,t){return"boolean"==typeof i&&(t=i,i=null),Kairos.Lexicon.format(this,i,t)}}();