/**
 * Kairos.js - A non date-based time calculator
 * @author Rodrigo Gomes da Silva <rodrigo.smscom@gmail.com>
 * @version v2.0.0
 * @link https://github.com/kairos
 * @license BSD-2-Clause
 */
!function(){"use strict";var n={};n._pattern="#hh:mm:ss.SSS",n._validator=new RegExp(/^[+-]?\d\d:\d\d:\d\d\.\d\d\d/);var t,e="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this;null!==e&&(t=e.Kairos),n.noConflict=function(){return e.Kairos=t,n},n.setPattern=function(t){n._validator=n.Lexicon.getValidator(t),n._pattern=t},n.getPattern=function(){return n._pattern},n.validate=function(t,e){return n.Lexicon.validate(t,e)},n["new"]=function(t,e){return new n.Engine(t,e)},n.absolute=function(t,e){return n["new"](t,e).toAbsolute()},n.plus=function(t,e,r){return n["new"](t,r).plus(e,r)},n.minus=function(t,e,r){return n["new"](t,r).minus(e,r)},n.multiply=function(t,e,r){return n["new"](t,r).multiply(e)},n.divide=function(t,e,r){return n["new"](t,r).divide(e)},n.getFraction=function(t,e,r,o){if(e>r)throw new Error("Improper fraction");return n["new"](t,o).multiply(e).divide(r)},n.getInterval=function(t,e,r){return n["new"](t,r).minus(e,r).toAbsolute()},n.toMilliseconds=function(t,e){return n["new"](t,e).toMilliseconds()},n.toSeconds=function(t,e){return n["new"](t,e).toSeconds()},n.toMinutes=function(t,e){return n["new"](t,e).toMinutes()},n.toHours=function(t,e){return n["new"](t,e).toHours()},n.compare=function(t,e,r){return n["new"](t,r).compareTo(e,r)},n.min=function(t,e){t instanceof Array||(e=null,t=Array.prototype.slice.call(arguments));var r=t.reduce(function(t,r){return n.compare(t,r,e)<0?t:r});return n["new"](r,e)},n.max=function(t,e){t instanceof Array||(e=null,t=Array.prototype.slice.call(arguments));var r=t.reduce(function(t,r){return n["new"](t,e).compareTo(r,e)>0?t:r});return n["new"](r,e)},"object"==typeof module&&module.exports?module.exports=n:"function"==typeof define&&define.amd?define([],function(){return n}):e.Kairos=n,Math.trunc=Math.trunc||function(n){return 0>n?Math.ceil(n):Math.floor(n)}}();
!function(){"use strict";var e={SIGN:"#",HOURS:"h",MINUTES:"m",SECONDS:"s",MILLISECONDS:"S"};Kairos.Lexicon={},Kairos.Lexicon.getValidator=function(a){if("string"!=typeof a&&(a=Kairos._pattern),a===Kairos._pattern)return Kairos._validator;for(var r="",s=0,t=a.length;t>s;s++){var i=a[s];switch(i){case e.SIGN:r+="^[+-]?";break;case e.HOURS:case e.MINUTES:case e.SECONDS:case e.MILLISECONDS:r+="\\d";break;default:r+=i.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}}return new RegExp(r)},Kairos.Lexicon.validate=function(e,a){return Kairos.Lexicon.getValidator(a).test(e)},Kairos.Lexicon.parse=function(a,r){if(r||(r=Kairos._pattern),!Kairos.Lexicon.validate(a,r))throw new Error("Cannot parse expression. Time format doesn't match the current time pattern.");for(var s=!0,t="",i="",n="",c="",o=0,l=r.length;l>o;o++){var S=r[o];switch(S){case e.SIGN:var d=-1!==["+","-"].indexOf(a[o]);d?s="+"===a[o]:(r=r.slice(0,o)+r.slice(o+1),l--,o--);break;case e.HOURS:t+=a[o];break;case e.MINUTES:i+=a[o];break;case e.SECONDS:n+=a[o];break;case e.MILLISECONDS:c+=a[o]}}var g=Kairos["new"]().addHours(t?+t:0).addMinutes(i?+i:0).addSeconds(n?+n:0).addMilliseconds(c?+c:0);return s||(g.milliseconds=-g.milliseconds),g},Kairos.Lexicon.format=function(a,r){r||(r=Kairos._pattern);for(var s=a.milliseconds>=0,t=String(Math.abs(a.getHours())),i=String(Math.abs(a.getMinutes())),n=String(Math.abs(a.getSeconds())),c=String(Math.abs(a.getMilliseconds())),o="",l=r.length-1;l>=0;l--){var S=r[l];switch(S){case e.SIGN:o=(s?"+":"-")+o;break;case e.HOURS:o=(t.slice(-1)||"0")+o,t.length>0&&(t=t.slice(0,t.length-1));break;case e.MINUTES:o=(i.slice(-1)||"0")+o,i.length>0&&(i=i.slice(0,i.length-1));break;case e.SECONDS:o=(n.slice(-1)||"0")+o,n.length>0&&(n=n.slice(0,n.length-1));break;case e.MILLISECONDS:o=(c.slice(-1)||"0")+o,c.length>0&&(c=c.slice(0,c.length-1));break;default:o=S+o}}return o}}();
!function(){"use strict";var i={SECOND:1e3,MINUTE:6e4,HOUR:36e5};Kairos.Engine=function(i,t){if(i){if(i instanceof Kairos.Engine)return i;if("number"==typeof i)return this.milliseconds=i,this;if("string"==typeof i&&i.length>0)return new Kairos.Lexicon.parse(i,t);throw new Error("Invalid arguments")}},Kairos.Engine.prototype._resolveStep=function(t,n){switch(t){case 1:this.removeMilliseconds(this.getMilliseconds());break;case i.SECOND:this.removeSeconds(this.getSeconds());break;case i.MINUTE:this.removeMinutes(this.getMinutes());break;case i.HOUR:this.removeHours(this.getHours())}return this.milliseconds+n*t},Kairos.Engine.prototype.milliseconds=0,Kairos.Engine.prototype.setHours=function(t){return this.milliseconds=this._resolveStep(i.HOUR,t),this},Kairos.Engine.prototype.getHours=function(){return Math.trunc(this.milliseconds/i.HOUR)},Kairos.Engine.prototype.setMinutes=function(t){return this.milliseconds=this._resolveStep(i.MINUTE,t),this},Kairos.Engine.prototype.getMinutes=function(){return Math.trunc(Math.trunc(this.milliseconds-Math.trunc(this.toHours())*i.HOUR)/i.MINUTE)},Kairos.Engine.prototype.setSeconds=function(t){return this.milliseconds=this._resolveStep(i.SECOND,t),this},Kairos.Engine.prototype.getSeconds=function(){return Math.trunc(Math.trunc(this.milliseconds-Math.trunc(this.toMinutes())*i.MINUTE)/i.SECOND)},Kairos.Engine.prototype.setMilliseconds=function(i){return this.milliseconds=this._resolveStep(1,i),this},Kairos.Engine.prototype.getMilliseconds=function(){return Math.trunc(this.milliseconds-Math.trunc(this.toSeconds())*i.SECOND)},Kairos.Engine.prototype.addHours=function(t){return this.milliseconds+=i.HOUR*t,this},Kairos.Engine.prototype.addMinutes=function(t){return this.milliseconds+=i.MINUTE*t,this},Kairos.Engine.prototype.addSeconds=function(t){return this.milliseconds+=i.SECOND*t,this},Kairos.Engine.prototype.addMilliseconds=function(i){return this.milliseconds+=i,this},Kairos.Engine.prototype.removeHours=function(t){return this.milliseconds-=i.HOUR*t,this},Kairos.Engine.prototype.removeMinutes=function(t){return this.milliseconds-=i.MINUTE*t,this},Kairos.Engine.prototype.removeSeconds=function(t){return this.milliseconds-=i.SECOND*t,this},Kairos.Engine.prototype.removeMilliseconds=function(i){return this.milliseconds-=i,this},Kairos.Engine.prototype.toHours=function(){return this.milliseconds/i.HOUR},Kairos.Engine.prototype.toMinutes=function(){return this.milliseconds/i.MINUTE},Kairos.Engine.prototype.toSeconds=function(){return this.milliseconds/i.SECOND},Kairos.Engine.prototype.toMilliseconds=function(){return this.milliseconds},Kairos.Engine.prototype.toAbsolute=function(){return this.milliseconds=Math.abs(this.milliseconds),this},Kairos.Engine.prototype.plus=function(i,t){return i=new Kairos.Engine(i,t),this.milliseconds+=i.toMilliseconds(),this},Kairos.Engine.prototype.minus=function(i,t){return i=new Kairos.Engine(i,t),this.milliseconds-=i.toMilliseconds(),this},Kairos.Engine.prototype.multiply=function(i){return this.milliseconds*=i,this},Kairos.Engine.prototype.divide=function(i){return this.milliseconds/=i,this},Kairos.Engine.prototype.compareTo=function(i,t){return i=new Kairos.Engine(i,t),this.milliseconds<i.toMilliseconds()?-1:this.milliseconds===i.toMilliseconds()?0:this.milliseconds>i.toMilliseconds()?1:void 0},Kairos.Engine.prototype.toString=function(i){return Kairos.Lexicon.format(this,i)}}();